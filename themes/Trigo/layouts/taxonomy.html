{{- /* Taxonomy:

  - Set hero with title, description and list of Terms for current Taxonomy.
*/ -}}

{{- define "main" -}}

  {{- $type := .Type -}}
  {{- $terms := .Data.Terms.Alphabetical -}}

  {{- /* Get cover image. */ -}}
  {{- $coverImage := partial "hero/cover_image.html" . -}}

  {{- $sectionCode := "" -}}
  {{- if not $coverImage}}
    {{- $sectionCode = partial "utils/index_code.html" . -}}
  {{- end -}}

  <section class="hero"
    {{ if $sectionCode }}style="--section: {{ $sectionCode }};"{{ end }}>

    <h1 class="title">
      {{- with (partial "utils/icon.html" (lower .Title)) -}}
        <span class="icon">{{ . }}</span>
      {{- end -}}
      {{ .Title | .RenderString }}
    </h1>

    {{- with .Description -}}
      <h3 class="description">{{- . | $.RenderString -}}</h3>
    {{- end -}}

    {{- with $terms -}}
      <ul class="terms">
        {{- range . -}}
          {{- $name := .Name -}}
          {{- $count := .Count -}}
          {{- with site.GetPage (printf "/%s/%s" $type $name) -}}
            <a href="{{ .RelPermalink }}">
              {{ .LinkTitle }} ({{ $count }})
            </a>
          {{- end -}}
        {{- end -}}
      </ul>

    {{- else -}}
      {{- i18n "noterms" | default (printf "No %s found." $type) -}}
    {{- end -}}

    {{- $coverImage -}}

  </section>

{{- end -}}
{{- /* End main. */ -}}