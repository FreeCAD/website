{{- /* Paginate current Section:
     - Provide links to Previous and Next pages in Section.
     - Fallback to default language Site if missing. */ -}}

{{- $section := .CurrentSection -}}
{{- $pages := $section.RegularPages
  | lang.Merge (where site.Sites.Default.RegularPages "CurrentSection.Path" "eq" $section.Path) -}}

{{- /* Reverse sort order if set in Front Matter. */ -}}
{{- if eq .Params.pageSortOrder "reverse" -}}
  {{- $pages = $pages.Reverse -}}
{{- end -}}

{{- if $pages -}}
  <footer class="single-footer">
    <nav class="pagination">
      {{- with $pages.Prev . -}}
        <a class="prev"
          href="{{ .RelPermalink -}}#top"
          alt="PREVIOUS ARTICLE"
          title="{{ i18n "previous_article" | default "Previous article" }}">
          {{- with (partial "utils/icon.html" "arrow-left") -}}
            <span class="icon">{{ . }}</span>
          {{- end -}}
          {{- .LinkTitle | .RenderString -}}
          {{- if not (eq .Lang $.Lang) -}}
            {{- with (partial "utils/icon.html" "translations") -}}
              <span class="icon">{{ . }}</span>
            {{- end -}}
            {{ .Lang | upper -}}
          {{- end -}}
          {{- if not hugo.IsProduction -}}
            {{- with .Weight -}}
              <span style="color: red;">{{ . }}</span>
            {{- end -}}
          {{- end -}}
        </a>
      {{- end -}}

      {{- with $pages.Next . -}}
        <a class="next"
          href="{{ .RelPermalink -}}#top"
          alt="NEXT ARTICLE"
          title="{{ i18n "next_article" | default "Next article" }}">
          {{- .LinkTitle | .RenderString -}}
          {{- if not (eq .Lang $.Lang) -}}
            {{- with (partial "utils/icon.html" "translations") -}}
              <span class="icon">{{ . }}</span>
            {{- end -}}
            {{ .Lang | upper -}}
          {{- end -}}
          {{- with (partial "utils/icon.html" "arrow-right") -}}
            <span class="icon">{{ . }}</span>
          {{- end -}}          {{- if not hugo.IsProduction -}}
            {{- with .Weight -}}
              <span style="color: red;">{{ . }}</span>
            {{- end -}}
          {{- end -}}
        </a>
      {{- end -}}
    </nav>
  </footer>
{{- end -}}
