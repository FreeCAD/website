{{- define "main" -}}

{{/* Debug only in non-production environments */}}
{{- if not hugo.IsProduction -}}
  {{- partial "debug.html" . -}}
{{- end -}}

{{- $title := .Title | .RenderString -}}
{{- $description := .Description | .RenderString -}}
{{- $type := .Type -}}
{{- $terms := .Data.Terms.Alphabetical -}}

{{- with $title -}}
  <header>
    <h1>
      {{ . }}
    </h1>
    {{- with $description -}}
      <p class="single-description">
        {{ . }}
      </p>
    {{- end -}}
  </header>
{{- end -}}

<ul class="terms">
  {{- with $terms -}}
    {{- range . -}}
      {{- $name := .Name -}}
      {{- $count := .Count -}}
      {{- with site.GetPage (printf "/%s/%s" $type $name) -}}
        <li>
          <a href="{{ .RelPermalink }}">
            {{ .LinkTitle -}}
            <sup>
              {{ $count }}
            </sup>
          </a>
        </li>
      {{- end -}}
    {{- end -}}
  {{- else -}}
    {{- i18n "noterms" | default (printf "No %s found." $type) -}}
  {{- end -}}
</ul>

{{- end -}}
{{/* end main */ -}}